# Feature Specification: Release tags required

**Feature Branch**: `007-release-tags-required`  
**Created**: 2025-02-21  
**Status**: Draft  

**Цель**: Зафиксировать правило тегирования релизов, чтобы сторонние проекты могли однозначно ссылаться на версии библиотеки HnH по тегам (например, в зависимостях).

---

## 1. Objective

- Все публичные релизы библиотеки HnH MUST быть отмечены **git-тегом** в репозитории.
- Формат тегов задаётся однозначно, чтобы потребители могли указывать зависимость по тегу (e.g. `pip install git+https://...@v0.2.0` или аналог для иных менеджеров пакетов).

---

## 2. Scope

### In Scope

- Требование: каждый релиз (версия, объявленная в `pyproject.toml` или changelog) имеет соответствующий тег в репозитории.
- Рекомендуемый формат тегов: **семантическое версирование** (например `v0.1.0`, `v1.0.0`). Допустимы теги вида `v<major>.<minor>.<patch>` без префикса (по соглашению команды).
- Документация: в README или CONTRIBUTING указать, что зависимости на HnH следует привязывать к тегу/версии для воспроизводимости.

### CI/CD

- **Локальный релиз (без Actions)**: тесты и сборка на своей машине, тег и push, затем вручную создаётся GitHub Release и загружаются файлы из `dist/`. Инструкция: [scripts/release_local.md](../../scripts/release_local.md); подготовка одной командой: `./scripts/release_prepare.sh`.
- **С GitHub Actions** (по желанию): в `.github/workflows/ci.yml` и `release.yml` триггеры по умолчанию отключены (оставлен только `workflow_dispatch`). Чтобы включить автозапуск тестов и релизов — раскомментируйте блоки `on.push` / `on.push.tags` в этих файлах.

### Out of Scope

- Автоматическое создание тега при коммите (например, по изменению версии в pyproject.toml) — по желанию можно добавить отдельно.
- Публикация в PyPI — не входит в данную спецификацию (теги остаются требованием независимо от способа распространения).

---

## 3. Requirements

### Functional Requirements

- **FR-001**: Каждый объявленный релиз (release) MUST иметь соответствующий git-тег в репозитории core.
- **FR-002**: Формат тега MUST позволять однозначную привязку к версии (рекомендуется `v*` по semver).
- **FR-003**: Документация (README и/или user-guide) MUST упоминать возможность установки по тегу для воспроизводимости сборок.

### Success Criteria

- **SC-001**: Сторонний проект может указать зависимость на HnH по тегу (например, `v0.1.0`) и получить воспроизводимую установку.
- **SC-002**: В репозитории отсутствуют «релизы без тега» (соответствие версии в pyproject.toml и тега проверяется вручную или скриптом при релизе).

---

## 4. Constitution Alignment (HnH)

- Требование к процессу релиза; не меняет контракты Identity/Dynamic State/Memory.
- Поддерживает воспроизводимость и прозрачность зависимостей для пользователей движка.
